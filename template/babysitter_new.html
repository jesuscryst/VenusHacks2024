<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Figma to CSS Example</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='babysitter_styles.css') }}">
</head>
<body>
  <!-- If you need a specific rectangle element, add it here -->
  <div class="rectangle-20"></div>
  <div class="header"></div>
  <div class ="ellipse ellipse-1"></div>
  <div class ="ellipse ellipse-2"></div>
  <div class ="ellipse ellipse-3"></div>
  <div class ="about about-1"></div>

  <div class ="about about-2"></div>

  <div class ="about about-3"></div>
  <div class ="scroller"></div>
  <div class ="scroller-mini"></div>

<!-- Profile creation form -->
<div id="profileFormContainer">
    <h2>Create Your Profile</h2>
    <form id="profileForm">
      <input type="text" name="name" placeholder="Your Name"><br>
      <textarea name="bio" placeholder="Bio"></textarea><br>
      <input type="file" name="profile_picture"><br>
      <input type="tel" name="contact_number" placeholder="Contact Number"><br>
      <button type="submit" onclick="sendData">Submit</button>
    </form>
  </div>
<div id="profileList"></div>

<script>

function sendInfo() {
  fetch('', {
    method: 'POST',
    headers: {
      'Accept': 'application/json',
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({name: "name", bio: "bio"})
  });
}
// Function to load profiles
async function loadProfiles() {
  const response = await fetch('/load-profiles');
  const profiles = await response.json();
  return profiles;
}

// Function to render profiles
function renderProfiles(profiles) {
  const profileList = document.getElementById('profileList');
  profileList.innerHTML = ''; // Clear existing profiles
  profileList.innerHTML = ''; // Clear existing profiles
  profiles.forEach(profile => {
    const profileDiv = document.createElement('div');
    profileDiv.classList.add('profile');
    profileDiv.innerHTML = `
      <h3>${profile.name}</h3>
      <p>${profile.bio}</p>
      <p>Contact: ${profile.contact_number}</p>
      <img src="${profile.profile_picture}" alt="${profile.name}'s Profile Picture">
    `;
    profileList.appendChild(profileDiv);
  });
}


//initial loads of profiles

window.onload = async function(){
  const profiles = await loadProfiles();
  renderProfiles(profiles)
}

// profile form stuff
document.getElementById('profileForm').addEventListener('submit', async (e) => {
    e.preventDefault();

    const formData = new FormData(e.target);
    const response = await fetch('/create-profile', {
    method: 'POST',
    body: formData
    });

    if (response.ok) {
    alert('Profile created successfully!');
    } else {
    alert('Failed to create profile.');
    }
});
</script>

</body>
</html>
